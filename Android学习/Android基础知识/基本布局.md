## 四种基本布局

### 介绍

布局是一种可以用于放置很多控件的容器，可以按照一定的规律调整内部控件的位置，从而编写处精美的界面。

布局的内部除了放置控件外，还可以放置布局，通过多层布局的嵌套，可以完成比较复杂的界面实现，如下图：

![1](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/1.png)

下面介绍Android中四种最基本的布局。

## LinearLayout

线性布局，一种非常常用的布局。这个布局会将所包含的空间在线性方向上依次排列。

### 线性布局的方向

在activity_main.xml中，通过`android:orientation="vertical"`指定了排列方向是垂直方向。

![2](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/2.png)

如果`android:orientation="horizontal"`则指定排列方向是水平方向。

![3](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/3.png)

注意：当LinearLayout的排列方向是horizontal（水平方向）时，内部控件绝对不能将宽度设定为match_parent，这样的话一个控件就会将整个水平方向占满，其他控件就没有可以放置的位置了。

### 关键属性用法

#### android:layout_gravity

用于指定控件在布局中的对齐方式。

> 当LinearLayout的排列方向是horizontal水平方向时，只有垂直方向上的对齐方式才会生效，此时水平方向上的长度不固定，每添加一个控件，水平方向上的长度会改变。
>
> 当LinearLayout的排列方向是vertical垂直方向时，只有水平方向上的对齐方式才会生效。
>
> 当该属性中有多个属性值时，多个属性值之间用竖线隔开，但是竖线前后千万不能出现空格。

示例：

当LinearLayout的排列方向是horizontal水平方向时，指定垂直方向上的排列方式。

![4](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/4.png)

#### android:layout_weight

这个属性允许我们使用比例的方式指定控件的大小。

当使用了android:layout_weight属性后，空间的宽度就不再由android:layout_width控制了。

示例：

![5](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/5.png)

我们在 EditText 和 Button 里都将 android:layout_weight 属性的值指定为 1，这表示EditText 和 Button 将在水平方向平分宽度  。

为什么将 android:layout_weight 属性的值同时指定为 1 就会平分屏幕宽度呢？其实原理也很简单，系统会先把 LinearLayout 下所有控件指定的 layout_weight 值相加，得到一个总值，然后每个控件所占大小的比例就是用该控件的 layout_weight 值除以刚才算出的总值。因此如果想让 EditText 占据屏幕宽度的 3/5，Button 占据屏幕宽度的 2/5，只需要将 EditText 的layout_weight 改成 3，Button 的 layout_weight 改成 2 就可以了。  

#### android:orientation

设置布局管理器内组件的排列方式，可以设置为horizontal（水平排列）、vertical（垂直排列、默认值）两个值的其中之一。



## RelativeLayout

相对布局。和LinearLayout排列规则不同，RelativeLayout更加随意，可以通过相对定位让控件出现在布局的任何位置。

RelativeLayout的属性非常多，但是这些属性都是有规律的。

示例：

![6](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/6.png)

#### 属性介绍

- `layout_alignParentTop`，控制该子组件是否与布局容器顶端对齐

- `layout_alignParentBottom`，控制该子组件是否与布局容器底端对齐

- `layout_alignParentLeft`，控制该子组件是否与布局容器左边对齐

- `layout_alignParentRight`，控制该子组件是否与布局容器右边对齐

- `layout_centerInParent`，控制该子组件是否位于布局容器的完全居中位置

- `layout_centerHorizontal`，控制该子组件是否位于布局容器的水平居中位置

- `layout_centerVertical`，控制该子组件是否位于布局容器的垂直居中位置

  ![7](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/7.png)

- `layout_above`，控制该子组件位于给出ID组件的上方

- `layout_below`，控制该子组件位于给出ID组件的下方

- `layout_toRightOf`，控制该子组件位于给出ID组件的右侧

- `layout_toLeftOf`，控制该子组件位于给出ID组件的左侧

  ![8](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/8.png)

  【在上面的例子中，其他视图都是和Button3相互对齐的。】

- `layout_alignTop`，控制该子组件位于给出ID组件的上边界对齐

- `layout_alignBottom`：控制该子组件位于给出ID组件的下边界对齐

- `layout_alignLeft`：控制该子组件位于给出ID组件的左边界对齐

- `layout_alignRight`：控制该子组件位于给出ID组件的右边界对齐

- `layout_alignBaseline`：视图与基准视图的基准线对
  ![9](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/9.png)

## FrameLayout（帧布局）

FrameLayout的应用场景少了很多，这种布局没有任何的定位方式，所有的控件都会摆放在布局的左上角。

![10](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/10.png)

在介绍碎片的时候会用到它。

帧布局容器为每个加入其中的组件创建一个空白区域，所有每个子组件占据一帧，这些帧会根据gravity属性执行自动对齐。

| XML属性                   | 相关方法                   | 说明                          |
| ------------------------- | -------------------------- | ----------------------------- |
| android:foreground        | setForceground(Drawable)   | 设置该帧布局容器的前景图像    |
| android:foregroundGravity | setForcegroundGravity(int) | 定义绘制前景图像的gravity属性 |

示例：3个TextView叠加在一起，上面的TextView遮住下面的TextView。

```xml
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity"
    >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/view1"
        android:width="210px"
        android:height="50px"
        android:background="#ff0000"/>
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/view2"
        android:width="180px"
        android:height="50px"
        android:background="#dd0000"/>
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/view3"
        android:width="150px"
        android:height="50px"
        android:background="#bb0000"/>
</FrameLayout>
```

![18](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/18.png)



## TableLayout

TableLayout允许使用表格的方式来排列控件，采用行、列的形式来管理组件。

既然是表格，那就一定会有行和列，在设计表格时我们尽量应该让每一行都拥有相同的列数，这样的表格也是最简单的。不过有时候事情并非总会顺从我们的心意，当表格的某行一定要有不相等的列数时，就需要通过合并单元格的方式来应对。  

TableLayout通过添加TableRow或其他组件来控制表格的行数和列数。

> 向TableLayout中添加一个TableRow，该TableRow就是一个表格行，TableRow也是容器，可以不断添加其他组件，每添加一个子组件表格就增加一列。
>
> 直接向TableLayout中添加组件，组件将直接占用一行。

在XML布局文件中定义表格布局的基本语法格式如下：

```java
<TableLayout xmlns:android-"http://schemas.android.com/apk/res/android" 
	属性－”属性值＂>
<TableRow>
UI控件
<／TableRow>
UI控件
<／TableLayout>
```

TableLayout继承自LinearLayout, 因此它完全支持LinearLayout所支持的属性，此外，它还有其他的常用属性。TableLayout布局的常用属性如表所示。

| 属性名称                | 功能描述                                                     |
| ----------------------- | ------------------------------------------------------------ |
| android:stretchColumns  | 设置可被拉伸的列。如：android:stretchColumns=“0”， 表示第0列可被拉伸 |
| android:shrinkColumns   | 设置可被收缩的列，如：android:shrinkColumns=“1. 2”, 表示1, 2列可收编 |
| android:collapseColumns | 设置可被隐藏的列，如：android:collapseColumns=”*”， 表示所有列可被隐藏 |
| android:layout_column   | 设置该控件显示的位置，如 android:layout_column=“1”表示在第1列显示 |
| android:layout_span     | 设置该控件占据几列，默认为1列                                |

示例:

![11](https://github.com/kuangdi1992/learning-summary/blob/master/Picture/Android/11.png)