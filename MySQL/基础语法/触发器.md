# 介绍

MySQL触发器和存储过程一样，是嵌入到MySQL服务器中的一段程序。

触发器是由事件来触发某个操作，这些事件包括INSERT，UPDATE，DELETE事件。所谓事件就是指用户的动作或者触发某项行为。如果定义了触发程序，当数据库执行这些语句时候，就相当于事件发生了，就会自动激发触发器执行相应的操作。当对数据表中的数据执行插入、更新和删除操作，需要自动执行一些数据库逻辑时，可以使用触发器来实现。

# 创建触发器

## 语法

```sql
CREATE TRIGGER 触发器名称
{BEFORE|AFTER} {INSERT|UPDATE|DELETE} ON 表名
FOR EACH ROW
触发器执行的语句块;
```

说明：

- 表名：表示触发器监控对象
- BEFORE|AFTER ：表示触发的时间。BEFORE 表示在事件之前触发；AFTER 表示在事件之后触发。
- INSERT|UPDATE|DELETE ：表示触发的事件。
  - INSERT 表示插入记录时触发；
  - UPDATE 表示更新记录时触发；
  - DELETE 表示删除记录时触发。
- 触发器执行的语句：可以是单条SQL，也可以是BEGIN……END结构组成的复合语句块。

## 举例

示例一：

```sql
#创建数据表
CREATE TABLE test_trigger (
id INT PRIMARY KEY AUTO_INCREMENT,
t_note VARCHAR(30)
);
CREATE TABLE test_trigger_log (
id INT PRIMARY KEY AUTO_INCREMENT,
t_log VARCHAR(30)
);

#创建触发器：名称为before_insert,向test_trigger数据表插入数据之前向test_trigger_log数据表中插入before_insert的日志信息。
CREATE TRIGGER before_insert
BEFORE INSERT ON test_trigger
FOR EACH ROW
BEGIN
	INSERT INTO test_trigger_log(t_log)
	VALUES('before_insert');
END;

#向test_trigger中插入数据
INSERT INTO test_trigger(t_note) VALUES('测试 BEFORE INSERT 触发器');

#查看test_trigger_log中的数据
SELECT * FROM test_trigger_log;
```

