# 索引失效

- 如果条件中有or，即使其中有部分条件带索引也不会使用(这也是为什么尽量少用or的原因)，例子中user_id无索引

注意：要想使用or，又想让索引生效，只能将or条件中的每个列都加上索引

![img](https://github.com/kuangdi1992/Interview-knowledge/blob/master/Picture/MySQL/1623038-20190619181118118-1784753048.png)

- 对于复合索引，如果不使用前列，后续列也将无法使用，类电话簿。
- like查询是以%开头

![img](https://github.com/kuangdi1992/Interview-knowledge/blob/master/Picture/MySQL/1623038-20190619181236139-968114236.png)

- 存在索引列的数据类型隐形转换，则用不上索引，比如列类型是字符串，那一定要在条件中将数据使用引号引用起来,否则不使用索引

![img](https://github.com/kuangdi1992/Interview-knowledge/blob/master/Picture/MySQL/1623038-20190619181326223-1654473887.png)

- where 子句里对索引列上有数学运算，用不上索引

![img](https://github.com/kuangdi1992/Interview-knowledge/blob/master/Picture/MySQL/1623038-20190619181436583-1773123023.png)

- where 子句里对有索引列使用函数，用不上索引

![img](https://github.com/kuangdi1992/Interview-knowledge/blob/master/Picture/MySQL/1623038-20190619181457265-1885631328.png)

- 如果mysql估计使用全表扫描要比使用索引快,则不使用索引

> 比如数据量极少的表

