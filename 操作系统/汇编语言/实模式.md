# 实模式

## 中断

中断：中止执行当前程序，转而跳转到另一个特定的地址上，去运行特定的代码。

在实模式下，中断的实现过程：首先保持CS和IP寄存器，然后装载新的CS和IP寄存器。

### 中断的产生

1、中断控制器给 CPU 发送了一个电子信号，CPU 会对这个信号作出应答。随后中断控制器会将中断号发送给 CPU，这是硬件中断。

2、CPU 执行了 INT 指令，这个指令后面会跟随一个常数，这个常数即是软中断号。这种情况是软件中断。

为了实现中断，要在内存中存放一个中断向量表，这个表的地址和长度由CPU的特定寄存器IDTR指向。

实模式下，表中的一个条目由代码段地址和段内偏移组成，如下图所示：

![img](https://static001.geekbang.org/resource/image/cd/51/cd6ed6b49bf06b8de6bcd47e82e24051.jpg?wh=3000x1892)

有了中断号以后，CPU 就能根据 IDTR 寄存器中的信息，计算出中断向量中的条目，进而装载 CS（装入代码段基地址）、IP（装入代码段内偏移）寄存器，最终响应中断。