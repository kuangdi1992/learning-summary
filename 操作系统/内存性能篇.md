### 内存映射

常说的内存容量是指物理内存，物理内存也称为主存。只有内核才可以直接访问物理内存。

问题：进程要访问内存时，要怎么办？

Linux内核给每个进程都提供了一个独立的虚拟地址空间，并且这个地址空间是连续的，这样进程可以很方便的访问虚拟内存。

虚拟地址空间的内部又被分为内核空间和用户空间两部分，不同字长（也就是单个 CPU 指令可以处理数据的最大长度）的处理器，地址空间的范围也不同。比如最常见的 32 位和 64 位系统，两张图来分别表示它们的虚拟地址空间，如下所示：

![img](https://static001.geekbang.org/resource/image/ed/7b/ed8824c7a2e4020e2fdd2a104c70ab7b.png?wh=1004*456)