# 题目

给定一个 n × n 的二维矩阵 matrix 表示一个图像。请你将图像顺时针旋转 90 度。

你必须在<font color=red> 原地</font> 旋转图像，这意味着你需要直接修改输入的二维矩阵。请不要 使用另一个矩阵来旋转图像。

【注意】需要原地旋转

# 示例

| 1    | 2    | 3    | 7    | 4    | 1    |
| ---- | ---- | ---- | ---- | ---- | ---- |
| 4    | 5    | 6    | 8    | 5    | 2    |
| 7    | 8    | 9    | 9    | 6    | 3    |

> ```
> 输入：matrix = [[1,2,3],[4,5,6],[7,8,9]]
> 输出：[[7,4,1],[8,5,2],[9,6,3]]
> ```

以上表格中从左边三列到右边三列，进行了顺时针旋转90度。

# 分析过程

## 分析原地旋转

1、从第一行的旋转开始，其中的元素从第i行的第j个元素-------> 倒数第i列的第j个元素，如果行数=列数=n，则倒数第i列表示为matrix[n-1-i]，那么公式如下：
$$
matrix[col][n-1-row] = matrix[row][col]
$$
2、所有行列旋转的公式就可以推导如下：
$$
matrix[n-1-row][n-1-col] = matrix[col][n-1-row] 
$$

$$
matrix[n-1-col][row]= matrix[n-1-row][n-1-col]
$$

$$
matrix[row][col] = matrix[n-1-col][row]
$$

经过上面的公式，四条边的旋转就已经弄清楚了。

## 分析哪些位置进行上述的原地旋转

1、当n为偶数时，需要将整个图形分为可以旋转覆盖的4份，如下图所示：

![fig1](https://github.com/kuangdi1992/Interview-knowledge/blob/master/Picture/Leetcode/481.png)

那么需要遍历的是一份，也就是长为n/2，宽为n/2的矩阵的元素。

2、当n为奇数时，同样需要将整个图形分为可以旋转覆盖的4份，但是有一点：中间元素不动，如下图所示：

![fig2](https://github.com/kuangdi1992/Interview-knowledge/blob/master/Picture/Leetcode/482.png)

那么，需要遍历长为(n+1)/2，宽为(n-1)/2的矩阵的元素。

两个合起来，就是长为(n+1)/2，宽为n/2的矩阵的元素。

# 代码

### python

```python
class Solution:
    def rotate(self, matrix: list) -> None:
        """
        Do not return anything, modify matrix in-place instead.
        """
        length = len(matrix)

        for col in range(length // 2):
            for row in range((length + 1) // 2):
                matrix[col][length-1-row], matrix[length-1-row][length-1-col], matrix[length-1-col][row], matrix[row][col] \
                    = matrix[row][col], matrix[col][length-1-row], matrix[length-1-row][length-1-col], matrix[length-1-col][row]
        print(matrix)

s = Solution()
matrix = [[1,2,3],
          [4,5,6],
          [7,8,9]]
s.rotate(matrix)
```

